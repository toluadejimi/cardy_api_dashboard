(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9344],{7942:function(e,n,r){"use strict";var t=r(85696);n.default=void 0;var a,o=(a=r(67294))&&a.__esModule?a:{default:a},s=r(64957),u=r(69898),i=r(90639);var c={};function l(e,n,r,t){if(e&&s.isLocalURL(n)){e.prefetch(n,r,t).catch((function(e){0}));var a=t&&"undefined"!==typeof t.locale?t.locale:e&&e.locale;c[n+"%"+r+(a?"%"+a:"")]=!0}}var d=function(e){var n,r=!1!==e.prefetch,a=u.useRouter(),d=o.default.useMemo((function(){var n=s.resolveHref(a,e.href,!0),r=t(n,2),o=r[0],u=r[1];return{href:o,as:e.as?s.resolveHref(a,e.as):u||o}}),[a,e.href,e.as]),f=d.href,h=d.as,p=e.children,_=e.replace,m=e.shallow,g=e.scroll,v=e.locale;"string"===typeof p&&(p=o.default.createElement("a",null,p));var b=(n=o.default.Children.only(p))&&"object"===typeof n&&n.ref,y=i.useIntersection({rootMargin:"200px"}),w=t(y,2),x=w[0],j=w[1],P=o.default.useCallback((function(e){x(e),b&&("function"===typeof b?b(e):"object"===typeof b&&(b.current=e))}),[b,x]);o.default.useEffect((function(){var e=j&&r&&s.isLocalURL(f),n="undefined"!==typeof v?v:a&&a.locale,t=c[f+"%"+h+(n?"%"+n:"")];e&&!t&&l(a,f,h,{locale:n})}),[h,f,j,v,r,a]);var O={ref:P,onClick:function(e){n.props&&"function"===typeof n.props.onClick&&n.props.onClick(e),e.defaultPrevented||function(e,n,r,t,a,o,u,i){("A"!==e.currentTarget.nodeName||!function(e){var n=e.currentTarget.target;return n&&"_self"!==n||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&s.isLocalURL(r))&&(e.preventDefault(),null==u&&t.indexOf("#")>=0&&(u=!1),n[a?"replace":"push"](r,t,{shallow:o,locale:i,scroll:u}))}(e,a,f,h,_,m,g,v)},onMouseEnter:function(e){n.props&&"function"===typeof n.props.onMouseEnter&&n.props.onMouseEnter(e),s.isLocalURL(f)&&l(a,f,h,{priority:!0})}};if(e.passHref||"a"===n.type&&!("href"in n.props)){var k="undefined"!==typeof v?v:a&&a.locale,Z=a&&a.isLocaleDomain&&s.getDomainLocale(h,k,a&&a.locales,a&&a.domainLocales);O.href=Z||s.addBasePath(s.addLocale(h,k,a&&a.defaultLocale))}return o.default.cloneElement(n,O)};n.default=d},90639:function(e,n,r){"use strict";var t=r(85696);Object.defineProperty(n,"__esModule",{value:!0}),n.useIntersection=function(e){var n=e.rootRef,r=e.rootMargin,i=e.disabled||!s,c=a.useRef(),l=a.useState(!1),d=t(l,2),f=d[0],h=d[1],p=a.useState(n?n.current:null),_=t(p,2),m=_[0],g=_[1],v=a.useCallback((function(e){c.current&&(c.current(),c.current=void 0),i||f||e&&e.tagName&&(c.current=function(e,n,r){var t=function(e){var n=e.rootMargin||"",r=u.get(n);if(r)return r;var t=new Map,a=new IntersectionObserver((function(e){e.forEach((function(e){var n=t.get(e.target),r=e.isIntersecting||e.intersectionRatio>0;n&&r&&n(r)}))}),e);return u.set(n,r={id:n,observer:a,elements:t}),r}(r),a=t.id,o=t.observer,s=t.elements;return s.set(e,n),o.observe(e),function(){s.delete(e),o.unobserve(e),0===s.size&&(o.disconnect(),u.delete(a))}}(e,(function(e){return e&&h(e)}),{root:m,rootMargin:r}))}),[i,m,r,f]);return a.useEffect((function(){if(!s&&!f){var e=o.requestIdleCallback((function(){return h(!0)}));return function(){return o.cancelIdleCallback(e)}}}),[f]),a.useEffect((function(){n&&g(n.current)}),[n]),[v,f]};var a=r(67294),o=r(26286),s="undefined"!==typeof IntersectionObserver;var u=new Map},72904:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return w}});var t=r(50029),a=r(87794),o=r.n(a),s=r(67294),u=r(11163),i=r(41664),c=r(48287),l=r(56348),d=r(57248),f=r(70449),h=r(59337),p=r(23182),_=r(35005),m=r.n(_),g=r(67750),v=r(28909),b=r(85893),y=function(){var e=(0,f.OW)(d.x4),n=e.error,r=e.submit,t=e.submitting,a=(0,g.t)(),o=(0,s.useContext)(h.V).updateUser;return(0,s.useEffect)((function(){localStorage.removeItem(p.Z.storageKeys.auth)}),[]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v.Z,{title:"Login"}),(0,b.jsxs)("div",{className:m().container,children:[(0,b.jsxs)("aside",{className:m().aside,children:[(0,b.jsx)("h2",{className:m().asideTitle,children:"Don\u2019t have an account yet?"}),(0,b.jsx)("p",{className:m().asideSubtitle,children:"Start getting to know your staff and customers better today"}),(0,b.jsx)(l.Z,{className:m().asideButton,href:"/auth/signup"+a,type:l.q.outline,children:"Get Started"})]}),(0,b.jsxs)("div",{className:m().content,children:[(0,b.jsx)("h2",{className:m().contentTitle,children:"Sign in to VerifyMe"}),(0,b.jsx)("p",{className:m().contentSubtitle,children:"Enter your login details below."}),(0,b.jsxs)("form",{method:"POST",onSubmit:function(e){return r(e,(function(e){o(null===e||void 0===e?void 0:e.authenticate);var n=window.location.search&&new URLSearchParams(window.location.search).get("to");u.default.push(n||"/app/dashboard")}))},children:[(0,b.jsxs)(c.BZ,{children:[(0,b.jsx)(c.__,{children:"Email Address"}),(0,b.jsx)(c.II,{name:"username",placeholder:"john@examplemail.com",required:!0,type:"email",validation:c.HI.email})]}),(0,b.jsxs)(c.BZ,{children:[(0,b.jsxs)(c.__,{className:m().forgotPasswordLabel,children:[(0,b.jsx)("span",{children:"Password"}),(0,b.jsx)(i.default,{href:"/auth/forgot-password"+a,children:(0,b.jsx)("a",{className:m().forgotPassword,tabIndex:-1,children:"Forgot password?"})})]}),(0,b.jsx)(c.II,{name:"password",placeholder:"Enter your password",required:!0,autoComplete:"off",type:"password"})]}),(0,b.jsx)(c._o,{errors:Array.isArray(n)?n.map((function(e){return e.message=String(e.message).indexOf("verify your email")>=0?(0,b.jsxs)(b.Fragment,{children:["Please verify your email to access your account. ",(0,b.jsx)(i.default,{href:"/auth/resend-verification",children:(0,b.jsx)("a",{rel:"noopener noreferrer",className:"strong no-decor",children:"Resend verification"})})]}):e.message,e})):n}),(0,b.jsx)(l.Z,{className:m().button,htmlType:"submit",loading:t,type:l.q.primary,children:"Login"})]}),(0,b.jsxs)("div",{className:"show-on-small",children:[(0,b.jsx)("br",{}),(0,b.jsxs)("p",{className:"align-center",children:["Dont have an account yet? ",(0,b.jsx)(i.default,{href:"/auth/signup"+a,children:(0,b.jsx)("a",{rel:"noopener noreferrer",className:"strong no-decor",children:"Sign Up"})})," now!"]})]})]})]})]})};y.getInitialProps=(0,t.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{layout:{hideFooter:!0,hideNav:!0,showBottomBackground:!1}});case 1:case"end":return e.stop()}}),e)})));var w=y},56348:function(e,n,r){"use strict";r.d(n,{q:function(){return t}});var t,a=r(59499),o=r(4730),s=(r(67294),r(11163)),u=r(62267),i=r(54081),c=r(37437),l=r.n(c),d=r(85893),f=["children","className","fullWidth","href","htmlType","loading","onClick","type"];function h(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function p(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?h(Object(r),!0).forEach((function(n){(0,a.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}!function(e){e.basic="basic",e.outline="outline",e.primary="primary",e.custom="custom"}(t||(t={}));n.Z=function(e){var n=e.children,r=e.className,a=e.fullWidth,c=e.href,h=e.htmlType,_=e.loading,m=e.onClick,g=e.type,v=(0,o.Z)(e,f),b=c?"a":"button",y=p({className:(0,i.Tz)(r,l().button,l()[g||t.outline],a&&l().fullWidth,_&&l().loading),onClick:m||function(e){c&&(e.preventDefault(),s.default.push(c))},type:h},v);return(0,d.jsx)(b,p(p({},y),{},{children:_?(0,d.jsx)(u.r,{style:{maxHeight:"15px",stroke:"currentColor"}}):n}))}},28909:function(e,n,r){"use strict";r(67294);var t=r(9008),a=r(85893);n.Z=function(e){var n=e.title,r=e.content;return(0,a.jsxs)(t.default,{children:[(0,a.jsx)("meta",{name:"description",content:r||"VerifyMe"}),(0,a.jsx)("title",{children:"VerifyMe | ".concat(n)})]})}},67750:function(e,n,r){"use strict";r.d(n,{t:function(){return a},W:function(){return o}});var t=r(11163);function a(){var e=(0,t.useRouter)(),n="",r=0;for(var a in e.query)n=(n=0===r?n+"?":n+"&")+(a+"=")+e.query[a],r++;return n}function o(){return!0}},57248:function(e,n,r){"use strict";r.d(n,{x4:function(){return _},Lv:function(){return m},z2:function(){return g},gF:function(){return v},Lo:function(){return b}});var t=r(59499),a=r(50029),o=r(87794),s=r.n(o),u=r(74231),i=r(76427),c=r.n(i),l=r(70449),d=r(17124);function f(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function h(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?f(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var p="\n    id\n    email\n    phone\n    firstname\n    lastname\n    username\n    token\n    userGroup {\n        group{\n            id\n            name\n            organisation {\n                id\n                name\n                industryId\n                cac\n                allowInvoice\n                allowKyc\n                status\n                slaPrice\n                address\n                allowAddressPlatform\n            }\n        }\n        role{\n            id\n            code\n            name\n        }\n        status{\n            id\n            code\n            label\n        }\n    }\n    userGroups {\n        group {\n            id\n            name\n            organisation {\n                id\n                name\n                industryId\n                cac\n                allowInvoice\n                allowKyc\n                status\n                slaPrice\n                address\n                allowAddressPlatform\n            }\n        }\n        role {\n            id\n            code\n            name\n        }\n        status {\n            id\n            code\n            label\n        }\n    }\n",_=function(){var e=(0,a.Z)(s().mark((function e(n){var r,t,a,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.Ry().shape({password:u.Z_().required(),username:u.Z_().required()}),e.next=3,r.validate(n).then((function(){return""})).catch((function(e){return e.message}));case 3:if(!(t=e.sent)){e.next=6;break}return e.abrupt("return",{error:t});case 6:return a="\n    mutation loginUser($password: String!, $username: String!) {\n      authenticate(password: $password, username: $username) {\n        ".concat(p,"\n      }\n    }\n    "),o=(0,l.ZP)(),e.next=10,o.request(a,n).then((function(e){return{response:e}})).catch((function(e){return{error:e.response&&e.response.errors}}));case 10:return i=e.sent,e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),m=function(){var e=(0,a.Z)(s().mark((function e(n){var r,t,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="\n    mutation switchSessionOrganisation($id: Float!) {\n        switchSessionOrganisation(id: $id) {\n        ".concat(p,"\n      }\n    }\n    "),t=(0,l.ZP)(),e.next=4,t.request(r,n).then((function(e){return{response:e}})).catch((function(e){return{error:e.response&&e.response.errors}}));case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),g=function(){var e=(0,a.Z)(s().mark((function e(n){var r,t,a,o,i,f,_;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={email:u.Z_().email().required(),firstname:u.Z_().matches(/^[a-zA-Z-]+$/,{excludeEmptyString:!0,message:"First Name can't contain numbers and some special characters"}).required(),lastname:u.Z_().matches(/^[a-zA-Z-]+$/,{excludeEmptyString:!0,message:"Last Name can't contain numbers and some special characters"}).required(),phone:u.Z_().required()},n.userType===d.xe.cooprate&&(t="Please accept our service level agreement to proceed",r=h(h({},r),{},{industryId:u.Z_().required(),cac:u.Z_().required(),companyName:u.Z_().required(),companyAddress:u.Z_().required(),jobTitle:u.Z_().required(),slaAgreement:u.O7().oneOf([!0],t).required(t)})),n.organisationId||(r=h(h({},r),{},{password:u.Z_().matches(/(?=.*\d)(?=.*[a-z]).{6,}/,"Password must contain alphanumeric character and minimum of 6 characters").required(),confirmPassword:u.Z_().required()})),a=u.Ry().shape(r),n.userType===d.xe.agent&&(n.isAgent=!0,n.hasBike=Boolean(Number(n.hasBike)),n.hasSmartphone=Boolean(Number(n.hasSmartphone)),delete n.state),e.next=7,a.validate(n).then((function(){return""})).catch((function(e){return e.message}));case 7:if(!(o=e.sent)){e.next=10;break}return e.abrupt("return",{error:o});case 10:if(n.confirmPassword===n.password){e.next=12;break}return e.abrupt("return",{error:"Passwords do not match"});case 12:return i="\n  mutation registerUser($data: UserInput!) {\n    register(data: $data){\n      ".concat(p,"\n    }\n  }\n  "),f=(0,l.ZP)(),e.next=16,f.request(i,{data:c()(h(h({},n),{},{organisationId:parseFloat(n.organisationId),groupId:parseFloat(n.groupId),roleId:parseFloat(n.roleId)}),["confirmPassword","slaAgreement"])}).then((function(e){return{response:e}})).catch((function(e){return{error:e.response&&e.response.errors}}));case 16:return _=e.sent,e.abrupt("return",_);case 18:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=(0,a.Z)(s().mark((function e(n){var r,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"\n  mutation($username: String!){\n    forgetPassword(username: $username){\n      ok\n    }\n  }\n  ",r=(0,l.ZP)(),e.next=4,r.request("\n  mutation($username: String!){\n    forgetPassword(username: $username){\n      ok\n    }\n  }\n  ",n).then((function(e){return{response:e}})).catch((function(e){return{error:e.response&&e.response.errors}}));case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=(0,a.Z)(s().mark((function e(n){var r,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"\n  mutation($username: String!){\n    resendAuth (username: $username){\n      ok\n    }\n  }\n  ",r=(0,l.ZP)(),e.next=4,r.request("\n  mutation($username: String!){\n    resendAuth (username: $username){\n      ok\n    }\n  }\n  ",n).then((function(e){return{response:e}})).catch((function(e){return{error:e.response&&e.response.errors}}));case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},37497:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return r(72904)}])},37437:function(e){e.exports={button:"Button_button__PjVhE",basic:"Button_basic__8vKgs",outline:"Button_outline__EsWgH",primary:"Button_primary___XGO6",custom:"Button_custom__35uVh",fullWidth:"Button_fullWidth__YGnCJ",loading:"Button_loading__sDdK_"}},35005:function(e){e.exports={container:"shared_auth_container__qG_A4",aside:"shared_auth_aside__ms1p1",content:"shared_auth_content__t2BiJ",asideTitle:"shared_auth_asideTitle__S1qBM",asideSubtitle:"shared_auth_asideSubtitle__BAQ1J",asideButton:"shared_auth_asideButton__Uh6HW",contentSubtitle:"shared_auth_contentSubtitle__8BDwx",contentTitle:"shared_auth_contentTitle__Iwznb",date:"shared_auth_date__H3di1",dateChild:"shared_auth_dateChild__eZyGa",dateStart:"shared_auth_dateStart__o_DR3",button:"shared_auth_button__6ykOn",toLoginButton:"shared_auth_toLoginButton__Y5Ikc",select:"shared_auth_select__hwDnl",forgotPasswordLabel:"shared_auth_forgotPasswordLabel__MFlaw",forgotPassword:"shared_auth_forgotPassword__6_ImN",logo:"shared_auth_logo____xWt",noResize:"shared_auth_noResize__1mJg5",fieldTrigger:"shared_auth_fieldTrigger___U9pP",radio:"shared_auth_radio__TDS9u",checkbox:"shared_auth_checkbox__CZs6e",passwordMeter:"shared_auth_passwordMeter__vfDuA",item:"shared_auth_item__bPv_M",quickNotice:"shared_auth_quickNotice__RLlal",quickNoticeBtn:"shared_auth_quickNoticeBtn__gTeZj",marginRight100:"shared_auth_marginRight100__XaQuO"}},41664:function(e,n,r){e.exports=r(7942)}},function(e){e.O(0,[9393,1528,3587,7242,8646,9774,2888,179],(function(){return n=37497,e(e.s=n);var n}));var n=e.O();_N_E=n}]);